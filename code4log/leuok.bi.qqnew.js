// [LEUOK_SDK]  Version: 0.6.0 - 2019-08-29 10:41:20 - Powered by Gameley.Inc  
 !function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var i=n(6),o=n(8);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){var i=n(9);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){n(0);var i=n(11);function o(t,n,s){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=i(e,t);if(o){var s=Object.getOwnPropertyDescriptor(o,t);return s.get?s.get.call(n):s.value}},o(t,n,s||t)}e.exports=o},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){var i=n(10);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){i(e,t,n[t])})}return e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var i=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,n){"use strict";n.r(t);var i=n(6),o=n.n(i),s="LEUOK_BI_SDK_UUID",r="https://bi.log.lightlygame.com",a="https://test.gw.leuok.com/bilog/",u=2606703,l=2500501,h=2005,c={setEnv:function(e){e.gameId||console.error("LEUOK","---\x3e","配置文件出错","缺少gameId"),!0===e.multiRegion&&console.warn("LEUOK","多区服游戏"),e.env="dev"===e.env?"dev":"prod",console.log("LEUOK","BI环境",e.env),e.log=!0===e.log,e.adURL="https://bi.log.lightlygame.com/adchannellog/",e.url="dev"===e.env?a:r,e.cdbURL="https://gw.lightlygame.com/gl-ms-single-server",e.adlog=!1!==e.adlog,e.bilog=!1!==e.bilog,e.multiRegion=!0===e.multiRegion},getRandom:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},getUUID:function(){for(var e="",t=0;t<8;t++)e+=this.getRandom();return e},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},toLogStr:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("|")},getPlat:function(){return"object"==("undefined"==typeof qq?"undefined":o()(qq))?(console.info("LEUOK current plat qq"),qq):"object"==("undefined"==typeof qg?"undefined":o()(qg))?(console.info("LEUOK current plat qg"),qg):"object"==("undefined"==typeof wx?"undefined":o()(wx))?(console.info("LEUOK current plat wx"),wx):"object"==("undefined"==typeof BK?"undefined":o()(BK))?(console.info("LEUOK current plat BK"),BK):"object"==("undefined"==typeof tt?"undefined":o()(tt))?(console.info("LEUOK current plat tt"),tt):"object"==("undefined"==typeof window?"undefined":o()(window))?(console.info("LEUOK current plat window"),window):void 0},log:function(){if(this.getPlat().leuok.conf.log){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).info.apply(e,["LEUOK"].concat(n))}}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseInt(e);return(NaN===n||n>100)&&(n=100),1===t?134+n+"00401":138+n+"06603"},p=n(1),f=n.n(p),g=n(4),y=n.n(g),v=n(2),I=n.n(v),m=n(0),b=n.n(m),S=n(3),q=n.n(S),O=function e(t,n){f()(this,e),this.logType=n.logType||"no_type",this.appId=t.appId||0,this.openId=t.userInfo.uuid||t.userInfo.deviceId||0,this.adChannelId=t.userInfo.adChannelId||0,this.adSubChannelId=t.userInfo.adSubChannelId||0,this.dt=c.dateFormat(new Date),this.regDt=c.dateFormat(new Date),this.logTag=1,this.sdkVersion=t.sdkVersion},k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),n.logType="open",I()(this,b()(t).call(this,e,n))}return q()(t,e),t}(O),T=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="source",(e=I()(this,b()(t).call(this,n,i))).sence=i.sence||0,e.sourceAppId=i.sourceAppId||"",e.adChannelId=i.adChannelId||n.launchOption.query.adChannelId||"",e.adSubChannelId=i.adSubChannelId||n.launchOption.query.adSubChannelId||"",e}return q()(t,e),t}(O),w=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="jump",(e=I()(this,b()(t).call(this,n,i))).position=i.position||0,e.jumpToAppId=i.jumpToAppId||0,e}return q()(t,e),t}(O),L=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="event",(e=I()(this,b()(t).call(this,n,i))).orderId=i.orderId||0,e.eventID=i.eventID||0,e.regDt=n.userInfo.regDt||"2006-01-02 15:04:05",e}return q()(t,e),t}(O),N=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="ad_banner",(e=I()(this,b()(t).call(this,n,i))).position=i.position||0,e.type=1,e}return q()(t,e),t}(O),P=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="level",(e=I()(this,b()(t).call(this,n,i))).regDt=n.userInfo.regDt||"2006-01-02 15:04:05",e.newLevel=i.newLevel||0,e.oldLevel=i.level||0,e.level=Math.abs(e.newLevel-e.oldLevel),e}return q()(t,e),t}(O),D=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="login",(e=I()(this,b()(t).call(this,n,i))).regDt=n.userInfo.regDt||"2006-01-02 15:04:05",e.nickname=i.nickName||"",e}return q()(t,e),t}(O),_=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="pay",(e=I()(this,b()(t).call(this,n,i))).platId=n.platId||0,e.dPrice=i.dPrice||0,e.totalNum=i.totalNum||0,e.payId=i.payId||0,e}return q()(t,e),t}(O),C=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="reg",(e=I()(this,b()(t).call(this,n,i))).dt=n.userInfo.regDt||e.dt,e}return q()(t,e),t}(O),U=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="share_out",(e=I()(this,b()(t).call(this,n,i))).position=i.type||0,e}return q()(t,e),t}(O),R=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),i.logType="ad_video",(e=I()(this,b()(t).call(this,n,i))).position=i.type||0,e.type=i.subType||0,e}return q()(t,e),t}(O),E=n(7),x=n.n(E),j=n(5),K=n.n(j),M=function(){function e(t,n){f()(this,e),this.uuid=t.userInfo.uuid||"",this.uid=n.uid||t.userInfo.uuid||"",this.platId=t.platId||0,this.regionId=n.regionId||t.regionId||0,this.channelId=t.userInfo.biChannelId||0,this.dt=c.dateFormat(new Date,"yyyy-MM-dd hh:mm:ss"),this.logTag=0,this.gender=t.userProfile.gender||0,this.country=t.userProfile.country||"",this.province=t.userInfo.ext.province||t.userProfile.province||"",this.city=t.userProfile.city||"",this.language=t.userProfile.language||"zh_CN"}return y()(e,[{key:"toString",value:function(){return"".concat(this.uuid,"|").concat(this.uid,"|").concat(this.platId,"|").concat(this.regionId,"|").concat(this.channelId,"|").concat(this.dt)}},{key:"toStringProfile",value:function(){return c.toLogStr(this.gender,this.country,this.province,this.city,this.language)}}]),e}(),A=function(e){function t(e,n){var i;return f()(this,t),(i=I()(this,b()(t).call(this,e,n))).regDt=e.userInfo.regDt||"",i.reged=0,i.level=n.level||0,i.vip=n.vip||0,i.payed=n.payed||0,i}return q()(t,e),y()(t,[{key:"toString",value:function(){return K()(b()(t.prototype),"toString",this).call(this)+"|"+this.regDt+"|"+this.level+"|"+this.reged+"|"+this.vip+"|"+this.payed}}]),t}(M),X=function(){function e(t){f()(this,e),this.deviceId=t.userInfo.deviceId||t.userInfo.uuid||"",this.ip=t.ip||"1.1.1.1",this.clientVersion=t.version||"",this.systemSoftware=t.system||"",this.systemHardware=t.model||"",this.comOperation=t.comOperation||0,this.network=t.network||0,this.cpuHardware=t.cpuHardware||"",this.gpuHardware=t.gpuHardware||"",this.memory=t.memory||0,this.screenWidth=t.screenWidth||0,this.screenHeight=t.screenHeight||0,this.density=t.pixelRatio||0,this.glRender=t.glRender||"",this.glVersion=t.glVersion||"",this.phoneNumber=t.phoneNumber||""}return y()(e,[{key:"toString",value:function(){return this.deviceId+"|"+this.ip+"|"+this.clientVersion+"|"+this.systemSoftware+"|"+this.systemHardware+"|"+this.comOperation+"|"+this.network+"|"+this.cpuHardware+"|"+this.gpuHardware+"|"+this.memory+"|"+this.screenWidth+"|"+this.screenHeight+"|"+this.density+"|"+this.glRender+"|"+this.glVersion+"|"+this.phoneNumber}}]),e}(),B=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_reg",e.dt=n.userInfo.regDt||e.dt,e.device=new X(n),e.reged=0,e.level=i.level||0,e.scene=n.launchOption.scene||"",e.source_appid=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return"".concat(this.logType,"|").concat(K()(b()(t.prototype),"toString",this).call(this),"|").concat(this.level,"|").concat(this.reged,"|").concat(this.device.toString(),"|").concat(this.scene,"|").concat(this.source_appid,"|").concat(K()(b()(t.prototype),"toStringProfile",this).call(this))}}]),t}(M),F=function(e){function t(e,n){var i;return f()(this,t),(i=I()(this,b()(t).call(this,e,n))).gameId=e.gameId,i}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.uuid+"|"+this.uid+"|"+this.gameId+"|"+this.platId+"|"+this.regionId+"|"+this.channelId+"|"+this.dt}},{key:"toStringRegU",value:function(){return c.toLogStr(this.uuid,this.gameId,this.platId,this.channelId,this.dt)}}]),t}(M),V=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_reg_u",e.dt=n.userInfo.regDt||e.dt,e.device=new X(n),e.scene=n.launchOption.scene||"",e.source_appid=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toStringRegU",this).call(this),this.scene,this.source_appid,K()(b()(t.prototype),"toStringProfile",this).call(this))}}]),t}(F),H=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).device=new X(n),e.logType="log_login",e.type=i.type||0,e.friendsNum=i.friendsNum||0,e.online=i.online||0,e.power=i.power||0,e.energy=i.energy||0,e.guildId=i.guildId||0,e.roleName=i.roleName||"",e.scene=n.launchOption.scene||"",e.source_appid=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toString",this).call(this),this.device.toString(),this.type,this.friendsNum,this.online,this.power,this.energy,this.guildId,this.roleName,this.scene,this.source_appid,K()(b()(t.prototype),"toStringProfile",this).call(this))}}]),t}(A),J=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_login_u",e.device=new X(n),e.scene=n.launchOption.scene||"",e.source_appid=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toStringRegU",this).call(this),this.scene,this.source_appid,K()(b()(t.prototype),"toStringProfile",this).call(this))}}]),t}(F),W=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_share_in",e.newPlayer=n.isReg?1:0,e.type=i.type||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return"".concat(this.logType,"|").concat(K()(b()(t.prototype),"toString",this).call(this),"|").concat(this.type,"|").concat(this.newPlayer)}}]),t}(A),$=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_share_out",e.type=i.type||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return"".concat(this.logType,"|").concat(K()(b()(t.prototype),"toString",this).call(this),"|").concat(this.type)}}]),t}(A),z=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_ad_video",e.type=i.type||0,e.subType=i.subType||0,e.battle=i.battle||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return"".concat(this.logType,"|").concat(K()(b()(t.prototype),"toString",this).call(this),"|").concat(this.type,"|").concat(this.subType,"|").concat(this.battle)}}]),t}(A),G=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_action",e.level=i.level||0,e.reged=0,e.device=new X(n),e.type=i.type||2,e.actionType=i.actionType||0,e.actionNumber=i.actionNumber||0,e.g1=i.g1||0,e.g2=i.g2||0,e.g3=i.g3||0,e.g4=i.g4||0,e.g5=i.g5||0,e.g6=i.g6||0,e.s3=i.s3||"",e.s4=i.s4||"",e.s5=i.s5||"",e.s6=i.s6||"",1===e.actionType&&999999===e.actionNumber?(e.s1=n.launchOption.scene||"",e.s2=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||""):(e.s1=i.s1||"",e.s2=i.s2||""),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return[this.logType,K()(b()(t.prototype),"toString",this).call(this),this.level,this.reged,this.device.toString(),this.type,this.actionType,this.actionNumber,this.g1,this.g2,this.g3,this.g4,this.g5,this.g6,this.s1,this.s2,this.s3,this.s4,this.s5,this.s6,K()(b()(t.prototype),"toStringProfile",this).call(this)].join("|")}}]),t}(F),Y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_app_once",e.device=new X(n),e.level=i.level||0,e.reged=0,e.actionNumber=i.actionNumber||0,e.scene=n.launchOption.scene||"",e.source_appid=n.launchOption.referrerInfo&&n.launchOption.referrerInfo.appId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.level+"|"+this.reged+"|"+this.device.toString()+"|"+this.actionNumber+"|"+this.scene+"|"+this.source_appid+"|"+K()(b()(t.prototype),"toStringProfile",this).call(this)}}]),t}(F),Z=function(e){function t(e,n){var i;return f()(this,t),(i=I()(this,b()(t).call(this,e,n))).sequenceId=n.sequenceId||0,i.reason=n.reason||0,i.subReason=n.subReason||0,i}return q()(t,e),y()(t,[{key:"toString",value:function(){return K()(b()(t.prototype),"toString",this).call(this)+"|"+this.sequenceId+"|"+this.reason+"|"+this.subReason}}]),t}(A),Q=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_battle",e.type=i.logType||0,e.battleType=i.battleType||0,e.battleId=i.battleId||0,e.time=i.time||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.type+"|"+this.battleType+"|"+this.battleId+"|"+this.time}}]),t}(Z),ee=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_energy",e.old=i.old||0,e.new=i.new||0,e.addOrReduce=e.new>e.old?1:0,e.energy=Math.abs(e.new-e.old),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toString",this).call(this),this.addOrReduce,this.old,this.new,this.energy)}}]),t}(Z),te=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_equip",e.addOrReduce=i.addOrReduce||0,e.equipType=i.equipType||0,e.equipId=i.equipId||0,e.num=i.num||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.addOrReduce+"|"+this.equipType+"|"+this.equipId+"|"+this.num}}]),t}(Z),ne=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_equip_degree",e.equipType=i.equipType||0,e.equipId=i.equipId||0,e.equipOldDegree=i.equipOldDegree||0,e.equipNewDegree=i.equipNewDegree||0,e.equipDegree=Math.abs(e.equipOldDegree-e.equipNewDegree),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.equipType+"|"+this.equipId+"|"+this.equipOldDegree+"|"+this.equipNewDegree+"|"+this.equipDegree}}]),t}(Z),ie=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_equip_level",e.equipType=i.equipType||0,e.equipId=i.equipId||0,e.equipOldLevel=i.equipOldLevel||0,e.equipNewLevel=i.equipNewLevel||0,e.equipLevel=Math.abs(e.equipOldLevel-e.equipNewLevel),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.equipType+"|"+this.equipId+"|"+this.equipOldLevel+"|"+this.equipNewLevel+"|"+this.equipLevel}}]),t}(Z),oe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_equip_playway",e.equipType=i.equipType||0,e.equipId=i.equipId||0,e.equipOldLevel=i.equipOldLevel||0,e.equipNewLevel=i.equipNewLevel||0,e.equipLevel=Math.abs(e.equipOldLevel-e.equipNewLevel),e.playType=i.playType||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.equipType+"|"+this.equipId+"|"+this.equipOldLevel+"|"+this.equipNewLevel+"|"+this.equipLevel+"|"+this.playType}}]),t}(Z),se=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_friends",e.old=i.old||0,e.new=i.new||0,e.addOrReduce=e.new>e.old?1:0,e.friends=Math.abs(e.new-e.old),e.type=i.type||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toString",this).call(this),this.addOrReduce,this.old,this.new,this.friends,this.type)}}]),t}(A),re=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_item",e.itemType=i.itemType||0,e.itemId=i.itemId||0,e.oldNum=i.oldNum||0,e.newNum=i.newNum||0,e.num=Math.abs(e.oldNum-e.newNum),e.addOrReduce=e.newNum>e.oldNum?1:0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.addOrReduce+"|"+this.itemType+"|"+this.itemId+"|"+this.oldNum+"|"+this.newNum+"|"+this.num}}]),t}(Z),ae=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType=i.logType||"x_event",e.extends=i.extends||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return"".concat(this.logType,"|").concat(K()(b()(t.prototype),"toString",this).call(this),"|").concat(this.extends)}}]),t}(A),ue=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_level",e.heroId=i.heroId||0,e.newLevel=i.newLevel||0,e.num=Math.abs(e.newLevel-e.level),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.heroId+"|"+this.newLevel+"|"+this.num}}]),t}(Z),le=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_money",e.oldMoney=i.oldMoney||0,e.newMoney=i.newMoney||0,e.money=Math.abs(e.oldMoney-e.newMoney),e.num=i.num||0,e.addOrReduce=e.newMoney>e.oldMoney?1:0,e.moneyType=i.moneyType||0,e.itemIdName=i.itemIdName||"",e.itemType=i.itemType||0,e.itemId=i.itemId||"",e.shop=i.shop||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toString",this).call(this),this.oldMoney,this.newMoney,this.money,this.num,this.addOrReduce,this.moneyType,this.itemIdName,this.itemType,this.itemId,this.shop)}}]),t}(Z),he=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_new_task",e.taskId=i.taskId||0,e.orderId=i.orderId||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.taskId+"|"+this.orderId}}]),t}(Z),ce=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_pay",e.regDt=n.userInfo.regDt||"",e.level=i.level||0,e.reged=0,e.vip=i.vip||0,e.payType=i.payType||0,e.orderNumber=i.orderNumber||"",e.dPrice=i.dPrice||0,e.dStoreNum=i.dStoreNum||0,e.totalNum=i.totalNum||0,e.fPayFlag=i.fPayFlag||0,e.payChannelId=i.payChannelId||0,e.payId=i.payId||0,e.payIdName=i.payIdName||"",e.dNum=i.dNum||0,e.dBeforeStoreNum=i.dBeforeStoreNum||0,e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.regDt+"|"+this.level+"|"+this.reged+"|"+this.vip+"|"+this.payType+"|"+this.orderNumber+"|"+this.dPrice+"|"+this.dStoreNum+"|"+this.totalNum+"|"+this.fPayFlag+"|"+this.payChannelId+"|"+this.payId+"|"+this.payIdName+"|"+this.dNum+"|"+this.dBeforeStoreNum+"|"+K()(b()(t.prototype),"toStringProfile",this).call(this)}}]),t}(M),de=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_power",e.old=i.old||0,e.new=i.new||0,e.addOrReduce=e.new>e.old?1:0,e.power=Math.abs(e.new-e.old),e}return q()(t,e),y()(t,[{key:"toString",value:function(){return c.toLogStr(this.logType,K()(b()(t.prototype),"toString",this).call(this),this.addOrReduce,this.old,this.new,this.power)}}]),t}(Z),pe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),(e=I()(this,b()(t).call(this,n,i))).logType="log_task",e.taskType=i.taskType||0,e.taskId=i.taskId||"",e}return q()(t,e),y()(t,[{key:"toString",value:function(){return this.logType+"|"+K()(b()(t.prototype),"toString",this).call(this)+"|"+this.taskType+"|"+this.taskId}}]),t}(Z),fe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,e),this.logType="error",this.gameId=t.gameId,this.channelId=t.userInfo.biChannelId||0,this.dt=c.dateFormat(new Date),this.regDt=t.userInfo.regDt||"",this.openId=t.userInfo.uuid||0,this.errorType=n.errorType||"video",this.errCode=n.errCode||0,this.logTag=1,this.sdkVersion=t.sdkVersion},ge=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,t),I()(this,b()(t).call(this,e,n))}return q()(t,e),y()(t,[{key:"adSource",value:function(){var e=this.sysInfo.launchOption;if(e.query.adChannelId&&e.query.adSubChannelId){var t=e.referrerInfo&&e.referrerInfo.appId?e.referrerInfo.appId:"";this.sendAd(T,{sence:e.scene,sourceAppId:t,adChannelId:e.query.adChannelId,adSubChannelId:e.query.adSubChannelId})}}},{key:"adOpen",value:function(){this.sendAd(k)}},{key:"adJump",value:function(e){this.checkParam(e,"跳转日志 adJump","position","jumpToAppId")&&this.sendAd(w,e)}},{key:"adEvent",value:function(e){this.sendAd(L,e)}},{key:"adBanner",value:function(e){this.checkParam(e,"Banner日志 adBanner","position")&&this.sendAd(N,e)}},{key:"adLogVideo",value:function(e){this.sendAd(R,e)}},{key:"adLevel",value:function(e){this.sendAd(P,e)}},{key:"adPay",value:function(e){this.sendAd(_,e)}},{key:"adShare",value:function(e){this.sendAd(U,e)}},{key:"adReg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.status.reg?console.warn("LEUOK","adReg已发送过不能重复发送"):1===this.sysInfo.cdbStatus&&this.sysInfo.isReg?this.sendAd(C):--t>=0&&setTimeout(function(){e.adReg(t)},2e3)}},{key:"adLogin",value:function(e){this.adReg(),this.status.login?console.warn("LEUOK","adLogin已发送过不能重复发送"):this.sendAd(D,e)}},{key:"appOnce",value:function(e){this.checkParam(e,"AppOnce日志 AppOnce","actionNumber")&&c.dateFormat(new Date,"yyyy-MM-dd")===this.sysInfo.userInfo.regDt.substring(0,10)&&!this.sysInfo.userInfo.actionNumbers.includes(e.actionNumber)&&(this.sysInfo.userInfo.actionNumbers.push(e.actionNumber),this.sendX(Y,e),this.adapter.setStorage(s,this.sysInfo.userInfo))}},{key:"adVideo",value:function(e){this.checkParam(e,"视频广告日志 AdVideo","type","subType")&&this.sendX(z,e)}},{key:"level",value:function(e){this.checkParam(e,"升级日志 Level","level","newLevel")&&this.sendX(ue,e)}},{key:"pay",value:function(e){this.checkParam(e,"充值日志 Pay","payType","orderNumber","dPrice","dStoreNum","totalNum","fPayFlag","dNum","dBeforeStoreNum")&&this.sendX(ce,e)}},{key:"sharedOut",value:function(e){this.checkParam(e,"分享出日志 SharedOut","type")&&this.sendX($,e)}},{key:"sendAd",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(this.conf.adlog){var o=new e(this.sysInfo,t);if(1!==this.sysInfo.cdbStatus||this.sysInfo.userInfo.isFromAd){if(this.sysInfo.userInfo.isFromAd&&(1===this.sysInfo.cdbStatus||["open","event","source"].includes(o.logType)))return c.log("开始发送adlog",o.logType,"......"),void this.request.post(this.conf.adURL,o,{"Content-Type":"application/json"});if(0===this.sysInfo.cdbStatus)return console.warn("LEUOK","CDB没有登录或登录失败","开始登录"),void this.cdbLogin();i--,2===this.sysInfo.cdbStatus&&i>=0&&(console.warn("LEUOK","CDB正在登录中","推广日志",o.logType,"3秒后重试第",3-i,"次"),setTimeout(function(){n.sendAd(e,t,i)},2e3))}else c.log("非推广用户取消发送",o.logType)}else c.log("客户端设置不通过BIsdk发送adlog")}}]),t}(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,e);var o=i.getLaunchOptionsSync();this.sysInfo={isReg:!1,cdbStatus:2,platId:1,userInfo:{deviceId:c.getUUID(),isFromAd:o.query.hasOwnProperty("adChannelId"),regDt:c.dateFormat(new Date),actionNumbers:[],cdbSuccess:!1,biChannelId:1000401,adChannelId:o.query.adChannelId||0,adSubChannelId:o.query.adSubChannelId||0,ext:{}},start:new Date,launchOption:o,sdkVersion:"0.6.0",userProfile:{}},i.getUserInfo&&i.getUserInfo().then(function(e){t.sysInfo.userProfile=e}),this.status={},this.request=n,this.conf={},this.adapter=i,this.cdb={},this.init=function(){}}return y()(e,[{key:"action",value:function(e){console.info("LEUOK 开始发送action日志"),this.checkParam(e,"行为日志 action","actionType","actionNumber")&&this.sendX(G,e)}},{key:"adVideo",value:function(e){this.checkParam(e,"视频广告日志 AdVideo","type","subType")&&this.sendX(z,e)}},{key:"appOnce",value:function(e){this.checkParam(e,"AppOnce日志 AppOnce","actionNumber")&&c.dateFormat(new Date,"yyyy-MM-dd")===this.sysInfo.userInfo.regDt.substring(0,10)&&!this.sysInfo.userInfo.actionNumbers.includes(e.actionNumber)&&(this.sysInfo.userInfo.actionNumbers.push(e.actionNumber),this.sendX(Y,e),this.adapter.setStorage(s,this.sysInfo.userInfo))}},{key:"battle",value:function(e){this.checkParam(e,"闯关日志 Battle","logType","battleType","battleId")&&this.sendX(Q,e)}},{key:"equip",value:function(e){this.checkParam(e,"装备日志 Equip","sequenceId","reason","equipType","equipId","num","addOrReduce")&&this.sendX(te,e)}},{key:"equipDegree",value:function(e){this.checkParam(e,"装备升阶日志 EquipDegree","equipType","equipId","equipOldDegree","equipNewDegree")&&this.sendX(ne,e)}},{key:"equipLevel",value:function(e){this.checkParam(e,"装备升级日志 EquipLevel","equipType","equipId","equipOldLevel","equipNewLevel")&&this.sendX(ie,e)}},{key:"equipPlayWay",value:function(e){this.checkParam(e,"装备玩法日志 EquipPlayWay","equipType","equipId","equipOldLevel","equipNewLevel","playType")&&this.sendX(oe,e)}},{key:"friends",value:function(e){this.checkParam(e,"好友日志 Friends","old","new","type")&&this.sendX(se,e)}},{key:"item",value:function(e){this.checkParam(e,"道具日志 Item","reason","itemType","itemId","oldNum","newNum")&&this.sendX(re,e)}},{key:"level",value:function(e){this.checkParam(e,"升级日志 Level","level","newLevel")&&this.sendX(ue,e)}},{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(console.info("LEUOK 开始发送login日志"),!0===this.conf.multiRegion){if(!0===e.onShow)return void this.loginU();this.sysInfo.start=new Date,this.sysInfo.regionId=e.regionId||0}e.type=1,this.sysInfo.regionId<1e6?console.error("LEUOK","登陆日志区服ID没有或小于1000000"):this.checkParam(e,"登录日志")&&this.sendX(H,e)}},{key:"loginU",value:function(e){this.checkParam(e,"登录日志")&&this.sendX(J,e)}},{key:"logout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Date;e.type=0,e.online=Math.ceil((t.getTime()-this.sysInfo.start.getTime())/1e3),this.sendX(H,e)}},{key:"money",value:function(e){if(this.checkParam(e,"money日志 Money","reason","oldMoney","newMoney","moneyType")){if(e.shop&&1===e.shop&&this.checkParam(e,"money日志 Money","itemType","itemId","num"))return void this.sendX(le,e);this.sendX(le,e)}}},{key:"newTask",value:function(e){this.checkParam(e,"强制任务日志 NewTask","taskId","regionId")&&this.sendX(he,e)}},{key:"pay",value:function(e){this.checkParam(e,"充值日志 Pay","payType","orderNumber","dPrice","dStoreNum","totalNum","fPayFlag","dNum","dBeforeStoreNum","payId")&&this.sendX(ce,e)}},{key:"power",value:function(e){this.checkParam(e,"战力日志 Power","old","new")&&this.sendX(de,e)}},{key:"reg",value:function(e){if(!0===this.conf.multiRegion){if(!0===e.onShow)return void this.regU();this.sysInfo.regionId=e.regionId||0}this.sysInfo.regionId<1e6?console.error("LEUOK","登陆日志区服ID没有或小于1000000"):this.checkParam(e,"注册日志")&&this.sendX(B,e)}},{key:"regU",value:function(e){this.checkParam(e,"注册日志")&&this.sendX(V,e)}},{key:"sharedIn",value:function(e){this.checkParam(e,"分享入日志 SharedIn","type")&&this.sendX(W,e)}},{key:"sharedOut",value:function(e){this.checkParam(e,"分享出日志 SharedOut","type")&&this.sendX($,e)}},{key:"task",value:function(e){this.checkParam(e,"非强制任务日志 Task","taskType","taskId")&&this.sendX(pe,e)}},{key:"event",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(this.checkParam(i,"自定义日志")){new A(this.sysInfo,t);this.sendX(ae,Object.assign(t,{logType:e,extends:i.join("|")}))}}},{key:"energy",value:function(e){this.checkParam(e,"体力日志 Energy","old","new")&&this.sendX(ee,e)}},{key:"adLogin",value:function(){}},{key:"error",value:function(e){this.checkParam(e,"上传错误日志 error","errorType","errCode")&&this.sendX(fe,e)}},{key:"sendX",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(this.conf.bilog){var o=new e(this.sysInfo,t);if(["log_app_once","error"].includes(o.logType)||"log_action"===o.logType&&1===t.actionType)return c.log("开始发送bilog",o.logType,"......"),void this.request.post(0===o.logTag?this.conf.url:this.conf.adURL,o,{"Content-Type":"text/plain"});if(1===this.sysInfo.cdbStatus)return c.log("开始发送bilog",o.logType,"......"),void this.request.post(0===o.logTag?this.conf.url:this.conf.adURL,new e(this.sysInfo,t),{"Content-Type":0===o.logTag?"text/plain":"application/json"});if(0===this.sysInfo.cdbStatus)return console.warn("LEUOK","发送BI","bi日志",o.logType,"失败 CDB开始登录重试"),void this.cdbLogin();--i>=0&&(console.warn("LEUOK","CDB正在登录中 --\x3e","bi日志",o.logType,"3秒后重试第",3-i,"次"),setTimeout(function(){n.sendX(e,t,i)},2e3))}else c.log("注意：程序配置不发送BI日志")}},{key:"getLocalData",value:function(e){var t=this.adapter.getStorageSync("LEUOK_BI_SDK_UID");t&&console.info("LEUOK","云存储签名",JSON.stringify(t),t);var n=this.adapter.getStorageSync(s);n&&!0===n.cdbSuccess?(Object.assign(this.sysInfo.userInfo,n),this.sysInfo.cdbStatus=1):(Object.assign(this.sysInfo.userInfo,n||{}),this.cdbLogin(e))}},{key:"cdbLogin",value:function(e){var t=this;this.sysInfo.cdbStatus=2,console.info("LEUOK 进入cdbLogin方法"),this.adapter.getAuthCode().then(function(e){return t.cdb.uid&&t.cdb.token?Promise.resolve({data:{state:0,info:t.cdb}}):(console.info("LEUOK CDB 开始登录 res:"+JSON.stringify(Object.assign(e,{gameId:t.sysInfo.gameId,channelId:t.sysInfo.cdbChannelId,platId:t.sysInfo.platId}))+" url:"+t.conf.cdbURL+"/api/user/login"),t.request.cdb(t.conf.cdbURL+"/api/user/login",Object.assign(e,{gameId:t.sysInfo.gameId,channelId:t.sysInfo.cdbChannelId,platId:t.sysInfo.platId}),{method:"post"}))}).then(function(e){if(console.info("LEUOK CDB 登录成功 res:"+JSON.stringify(e)),0===e.data.state){t.cdb=e.data.info,t.getProvince(),t.sysInfo.userInfo.openId=e.data.info.openId||t.sysInfo.userInfo.uuid,t.sysInfo.userInfo.uuid||(t.sysInfo.userInfo.uuid=e.data.info.openId),t.appOnce({actionNumber:999998});var n=x()({},t.cdb,{gameId:t.sysInfo.gameId,channelId:t.sysInfo.cdbChannelId});return console.info("LEUOK","云存储登录成功--签名:",JSON.stringify(n)),t.adapter.setStorage("LEUOK_BI_SDK_UID",n),t.request.cdb(t.conf.cdbURL+"/api/userCloudData/getSelfData",{platId:t.sysInfo.platId,key:999,sdType:0},{header:n})}return Promise.reject("cdb登录失败 ---\x3e "+e.data.msg)}).then(function(n){if(console.info("CDB 登录成功2 res:"+JSON.stringify(n)),0!==n.data.state)return Promise.reject("cdb获取key数据失败"+n.data.msg);if(t.appOnce({actionNumber:999997}),null===n.data.info||"null"===n.data.info){t.sysInfo.isReg=!0,["wx","qzone"].includes("qqnew")&&t.sysInfo.launchOption.query.adChannelId&&Object.assign(t.sysInfo.userInfo,{isFromAd:!0,adChannelId:t.sysInfo.launchOption.query.adChannelId,adSubChannelId:t.sysInfo.launchOption.query.adSubChannelId});var i=JSON.parse(JSON.stringify(t.sysInfo.userInfo));delete i.actionNumbers,delete i.cdbSuccess,delete i.ext;var o=function(){return t.request.cdb(t.conf.cdbURL+"/api/userCloudData/setSelfNormalData",{platId:t.sysInfo.platId,key:999,value:JSON.stringify(i)},{header:{gameId:t.sysInfo.gameId,channelId:t.sysInfo.cdbChannelId,uid:t.cdb.uid,token:t.cdb.token}})};o().then(function(e){0!==e.data.state&&console.error("LEUOK","存储数据失败 重试",e.data.msg)}).catch(function(e){console.error("LEUOK","存储数据失败 重试",e),setTimeout(function(){o()},2e3)})}else{var r=JSON.parse(n.data.info);Object.assign(t.sysInfo.userInfo,r),r.biChannelId||(t.sysInfo.userInfo.biChannelId=t.sysInfo.channelId)}t.sysInfo.cdbStatus=1,t.sysInfo.userInfo.cdbSuccess=!0,t.sysInfo.isReg&&(t.reg({onShow:!0}),t.level({level:0,newLevel:0}),t.friends({old:0,new:0,type:0}),t.energy({old:0,new:0}),t.power({old:0,new:0})),t.adapter.setStorage(s,x()({},t.sysInfo.userInfo)),t.login({onShow:!0}),e?(console.info("LEUOK 开始执行init回调"),e()):console.info("LEUOK 不需要执行init回调"),console.info("LEUOK 执行完登录所有流程")}).catch(function(e){t.sysInfo.cdbStatus=0,console.error("LEUOK","CDB登录失败22",JSON.stringify(e))})}},{key:"getProvince",value:function(){var e=this;this.request.cdb(this.conf.cdbURL+"/api/userCloudData/getLocation",{},{header:{gameId:this.sysInfo.gameId,channelId:this.sysInfo.cdbChannelId,uid:this.cdb.uid,token:this.cdb.token}}).then(function(t){t.data.ok&&t.data.info&&(e.sysInfo.userInfo.ext.province=t.data.info.name)})}},{key:"checkParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in e)"string"==typeof e[n]&&(e[n]=e[n].replace(/\|/g,""));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];for(var r=0;r<o.length;r++){var a=o[r];if(!e.hasOwnProperty(a))return console.error(t+"缺少必要参数 ----\x3e"+a),!1}return!0}},{key:"clear",value:function(){var e=this;this.adapter.getAuthCode().then(function(t){return e.cdb.uid&&e.cdb.token?Promise.resolve({data:{state:0,info:e.cdb}}):e.request.cdb(e.conf.cdbURL+"/api/user/login",Object.assign(t,{gameId:e.sysInfo.gameId,channelId:e.sysInfo.cdbChannelId,platId:e.sysInfo.platId}))}).then(function(t){0===t.data.state?(e.cdb=t.data.info,e.request.cdb(e.conf.cdbURL+"/api/userCloudData/setSelfNormalData",{platId:e.sysInfo.platId,key:999,value:"null"},{header:{gameId:e.sysInfo.gameId,channelId:e.sysInfo.cdbChannelId,uid:e.cdb.uid,token:e.cdb.token}}),e.adapter.removeStorage("LEUOK_BI_SDK_UID"),e.adapter.removeStorage(s)):console.error("LEUOK","清除失败")})}}]),e}()),ye={request:{promisify:function(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return new Promise(function(n,o){e.apply(void 0,[Object.assign({},t,{success:n,fail:o})].concat(i))})}}}.promisify(qq.request)},ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;f()(this,e),this.retryCount=t,this.delay=n}return y()(e,[{key:"post",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.retryCount;ye.request({url:e,data:0===t.logTag?t.toString():t,method:"POST"}).then(function(){c.log("成功发送".concat(0===t.logTag?"bilog":"adlog"),t.logType,t),"login"!==t.logType&&"reg"!==t.logType||(qq.leuok.status[t.logType]=!0)}).catch(function(o){i>0&&"request:fail timeout"!==o.errMsg&&(i--,console.warn("LEUOK","发送",t.logType,"日志失败","原因 --\x3e",o,"".concat(n.delay,"秒后重试第"),3-i,"次"),setTimeout(function(){n.post(e,t,i)},1e3*n.delay))})}},{key:"cdb",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye.request({url:e,data:t,method:n.method||"POST",header:n.header||{}})}}]),e}(),Ie={getAuthCode:function(){return new Promise(function(e,t){qq.login({success:function(n){n.code?e({code:n.code,data:""}):t("qq.login 获取code失败")},fail:function(){t("qq.login 获取code失败")}})})},getStorageSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qq.getStorageSync(e)},getLaunchOptionsSync:function(){return qq.getLaunchOptionsSync()},setStorage:function(e,t){qq.setStorage({key:e,data:t})},removeStorage:function(e){qq.removeStorage({key:e})},getUserInfo:function(){return new Promise(function(e,t){qq.getSetting({success:function(n){n.authSetting["scope.userInfo"]&&qq.getUserInfo({success:function(t){e(t.userInfo)},fail:function(){t("qq.getUserInfo 获取用户信息失败")}})},fail:function(){t("qq.getSetting 获取授权信心失败")}})})}};console.log("LEUOK Build version: 0.6.0 - 2019-08-29T02:41:16.299Z - Powered by Gameley.Inc "),qq.leuok=new ge(new ve(3,3),Ie),qq.leuok.init=function(e){if(e.appId){c.setEnv(e),this.conf=e,this.sysInfo.userInfo.biChannelId=l,Object.assign(this.sysInfo,{appId:e.appId,gameId:e.gameId||0,channelId:l,cdbChannelId:h}),this.conf.multiRegion||(this.sysInfo.regionId="".concat(e.gameId,"010001"));try{var t=qq.getSystemInfoSync();Object.assign(this.sysInfo,t),this.sysInfo.platId=t.system.includes("iOS")?1:3,this.sysInfo.channelId=t.system.includes("iOS")?l:u,this.sysInfo.userInfo.biChannelId=this.sysInfo.channelId}catch(e){console.warn("LEUOK","获取硬件信息失败")}if(this.sysInfo.launchOption.query.leuokShareIn)this.sysInfo.userInfo.biChannelId=d(this.sysInfo.launchOption.query.leuokShareIn,this.sysInfo.platId);else if(this.sysInfo.launchOption.query.ioChannelId&&this.sysInfo.launchOption.query.anChannelId){var n=1===this.sysInfo.platId?this.sysInfo.launchOption.query.ioChannelId:this.sysInfo.launchOption.query.anChannelId;this.sysInfo.userInfo.biChannelId=n.trim()}this.getLocalData(),this.adapter.getStorageSync(s)||(this.sysInfo.userInfo.isFromAd&&this.adOpen(),this.appOnce({actionNumber:999999}))}else console.error("LEUOK","缺少qq appID")},qq.onShow(function(){qq.leuok.action({type:2,actionType:999999,actionNumber:999999});var e=qq.getStorageSync(s);qq.leuok.sysInfo.start=new Date,e&&!0===e.cdbSuccess&&qq.leuok.login({onShow:!0})}),qq.onHide(function(){qq.leuok.logout()})}]); 